# Dang! — Project TODO

## Phase 2: Theme & Dependencies
- [x] Apply Amethyst Nexus theme to index.css
- [x] Update index.html with Google Fonts and dark class
- [x] Install recharts, date-fns, framer-motion (already in deps)
- [x] Update App.tsx with dark ThemeProvider and route structure

## Phase 3: Backend — Wazuh Proxy
- [x] Add Wazuh credentials to secrets (WAZUH_HOST, WAZUH_USER, WAZUH_PASS)
- [x] Create server/wazuh/wazuhClient.ts — proxy client with auth, rate limiting, field filtering
- [x] Create server/wazuh/wazuhRouter.ts — tRPC router with all GET endpoints
- [x] Implement /agents, /agents/summary, /agents/status endpoints
- [x] Implement /alerts (via manager logs/stats) endpoints
- [x] Implement /vulnerabilities endpoints
- [x] Implement /mitre endpoints (tactics, techniques, groups, metadata)
- [x] Implement /sca (compliance) endpoints
- [x] Implement /syscheck (FIM) endpoints
- [x] Implement /ciscat endpoints
- [x] Register wazuh router in server/routers.ts

## Phase 4: Backend — HybridRAG + Analyst Notes
- [x] Add analyst_notes and rag_sessions tables to drizzle/schema.ts
- [x] Run migration for analyst_notes and rag_sessions
- [x] Create server/hybridrag/hybridragRouter.ts — Nemotron 3 Nano integration
- [x] Implement RAG context building from Wazuh telemetry
- [x] Implement chat endpoint with fallback LLM
- [x] Implement analyst notes CRUD (create, list, getById, update, delete)
- [x] Register hybridrag router in server/routers.ts

## Phase 5: Frontend — Layout & Shared Components
- [x] Read and customize DashboardLayout.tsx for Amethyst Nexus
- [x] Build GlassPanel shared component
- [x] Build ThreatBadge severity badge component
- [x] Build StatCard metric card component
- [x] Build RefreshControl component
- [x] Build RawJsonViewer component
- [x] Build PageHeader component
- [x] Build WazuhGuard connection guard component
- [x] Update App.tsx with all 9 routes
- [x] Update sidebar navigation items

## Phase 6: Agent Health Dashboard
- [x] Create client/src/pages/AgentHealth.tsx
- [x] Agent status overview cards (active/disconnected/never connected)
- [x] OS distribution donut chart
- [x] Agent list table with search/filter
- [x] Configurable auto-refresh

## Phase 7: Alerts Timeline + MITRE ATT&CK
- [x] Create client/src/pages/AlertsTimeline.tsx
- [x] Severity filter controls
- [x] Hourly event distribution bar chart
- [x] Weekly heatmap (day × hour)
- [x] Manager logs table with pagination
- [x] Create client/src/pages/MitreAttack.tsx
- [x] Tactic columns (ATT&CK matrix style)
- [x] Technique cards with descriptions
- [x] Threat groups section

## Phase 8: Vulnerabilities + FIM
- [x] Create client/src/pages/Vulnerabilities.tsx
- [x] CVE severity distribution pie chart
- [x] Status breakdown bar chart
- [x] CVE detail table with pagination
- [x] Create client/src/pages/FileIntegrity.tsx
- [x] Last scan status cards
- [x] Syscheck files table with hash display
- [x] File path search filter

## Phase 9: Compliance Posture + Analyst Notes
- [x] Create client/src/pages/Compliance.tsx
- [x] SCA policy cards with compliance scores
- [x] Compliance score horizontal bar chart
- [x] Policy checks table (pass/fail)
- [x] Create client/src/pages/AnalystNotes.tsx
- [x] Note creation dialog with severity, agent ID, rule ID, CVE ID
- [x] Notes list with resolve/delete actions
- [x] Severity filter

## Phase 10: HybridRAG Assistant Panel
- [x] Create client/src/pages/Assistant.tsx
- [x] Chat interface with message history
- [x] Suggestion chips for common queries
- [x] Model status indicator (Nemotron vs Fallback)
- [x] Session clear functionality
- [x] Wazuh context injection toggle
- [x] Wire configurable refresh intervals across all pages

## Phase 11: Tests & QA
- [x] Write vitest tests for wazuh proxy router
- [x] Write vitest tests for hybridrag router (model status, notes CRUD)
- [x] All 6 tests passing
- [x] TypeScript compilation clean (0 errors)
- [x] Final integration check — all pages render correctly
- [ ] Save checkpoint
