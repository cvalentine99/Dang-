{
  "query": "\nCREATE TABLE kg_endpoints (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  endpoint_id VARCHAR(256) NOT NULL UNIQUE,\n  path VARCHAR(512) NOT NULL,\n  method VARCHAR(16) NOT NULL,\n  summary TEXT,\n  description TEXT,\n  tags JSON,\n  operation_id VARCHAR(256),\n  resource VARCHAR(128),\n  operation_type ENUM('READ','CREATE','UPDATE','DELETE') NOT NULL DEFAULT 'READ',\n  risk_level ENUM('SAFE','MUTATING','DESTRUCTIVE') NOT NULL DEFAULT 'SAFE',\n  allowed_for_llm TINYINT NOT NULL DEFAULT 1,\n  auth_method VARCHAR(32) DEFAULT 'JWT',\n  trust_score DECIMAL(4,3) NOT NULL DEFAULT 0.500,\n  deprecated TINYINT NOT NULL DEFAULT 0,\n  last_verified_at TIMESTAMP NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  INDEX idx_ke_method (method),\n  INDEX idx_ke_resource (resource),\n  INDEX idx_ke_risk (risk_level),\n  INDEX idx_ke_trust (trust_score),\n  INDEX idx_ke_llm (allowed_for_llm)\n);\n\nCREATE TABLE kg_parameters (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  endpoint_id INT NOT NULL,\n  name VARCHAR(128) NOT NULL,\n  location ENUM('query','path','header','body') NOT NULL DEFAULT 'query',\n  required TINYINT NOT NULL DEFAULT 0,\n  param_type VARCHAR(64) DEFAULT 'string',\n  description TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  INDEX idx_kp_endpoint (endpoint_id),\n  INDEX idx_kp_name (name)\n);\n\nCREATE TABLE kg_responses (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  endpoint_id INT NOT NULL,\n  http_status INT NOT NULL,\n  description TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  INDEX idx_kr_endpoint (endpoint_id)\n);\n\nCREATE TABLE kg_auth_methods (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  auth_id VARCHAR(64) NOT NULL UNIQUE,\n  auth_type VARCHAR(64) NOT NULL,\n  description TEXT,\n  ttl_seconds INT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE kg_resources (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  name VARCHAR(128) NOT NULL UNIQUE,\n  endpoint_count INT NOT NULL DEFAULT 0,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE kg_use_cases (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  intent VARCHAR(128) NOT NULL UNIQUE,\n  semantic_type ENUM('READ','CREATE','UPDATE','DELETE') NOT NULL DEFAULT 'READ',\n  domain VARCHAR(128) NOT NULL,\n  description TEXT,\n  endpoint_ids JSON,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  INDEX idx_kuc_domain (domain),\n  INDEX idx_kuc_type (semantic_type)\n);\n\nCREATE TABLE kg_indices (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  pattern VARCHAR(256) NOT NULL UNIQUE,\n  description TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE kg_fields (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  index_id INT NOT NULL,\n  field_name VARCHAR(256) NOT NULL,\n  field_type VARCHAR(64) NOT NULL,\n  description TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  INDEX idx_kf_index (index_id),\n  INDEX idx_kf_name (field_name)\n);\n\nCREATE TABLE kg_error_patterns (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  http_status INT NOT NULL UNIQUE,\n  description TEXT,\n  cause TEXT,\n  mitigation TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE kg_trust_history (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  endpoint_id INT NOT NULL,\n  old_score DECIMAL(4,3),\n  new_score DECIMAL(4,3) NOT NULL,\n  reason TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  INDEX idx_kth_endpoint (endpoint_id)\n);\n\nCREATE TABLE kg_answer_provenance (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  session_id VARCHAR(64),\n  question TEXT,\n  answer TEXT,\n  confidence DECIMAL(4,3) NOT NULL,\n  endpoint_ids JSON,\n  parameter_ids JSON,\n  doc_chunk_ids JSON,\n  warnings JSON,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  INDEX idx_kap_session (session_id),\n  INDEX idx_kap_confidence (confidence)\n);\n\nCREATE TABLE kg_sync_status (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  layer VARCHAR(64) NOT NULL UNIQUE,\n  entity_count INT NOT NULL DEFAULT 0,\n  last_sync_at TIMESTAMP NULL,\n  status ENUM('idle','syncing','completed','error') NOT NULL DEFAULT 'idle',\n  error_message TEXT,\n  duration_ms INT,\n  spec_version VARCHAR(32),\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3xenzgJ3NGNThF2.96bc46f6ec2f --database 9n2ukZGVgWAjZMdS2ZS3BU --execute \nCREATE TABLE kg_endpoints (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  endpoint_id VARCHAR(256) NOT NULL UNIQUE,\n  path VARCHAR(512) NOT NULL,\n  method VARCHAR(16) NOT NULL,\n  summary TEXT,\n  description TEXT,\n  tags JSON,\n  operation_id VARCHAR(256),\n  resource VARCHAR(128),\n  operation_type ENUM('READ','CREATE','UPDATE','DELETE') NOT NULL DEFAULT 'READ',\n  risk_level ENUM('SAFE','MUTATING','DESTRUCTIVE') NOT NULL DEFAULT 'SAFE',\n  allowed_for_llm TINYINT NOT NULL DEFAULT 1,\n  auth_method VARCHAR(32) DEFAULT 'JWT',\n  trust_score DECIMAL(4,3) NOT NULL DEFAULT 0.500,\n  deprecated TINYINT NOT NULL DEFAULT 0,\n  last_verified_at TIMESTAMP NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  INDEX idx_ke_method (method),\n  INDEX idx_ke_resource (resource),\n  INDEX idx_ke_risk (risk_level),\n  INDEX idx_ke_trust (trust_score),\n  INDEX idx_ke_llm (allowed_for_llm)\n);\n\nCREATE TABLE kg_parameters (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  endpoint_id INT NOT NULL,\n  name VARCHAR(128) NOT NULL,\n  location ENUM('query','path','header','body') NOT NULL DEFAULT 'query',\n  required TINYINT NOT NULL DEFAULT 0,\n  param_type VARCHAR(64) DEFAULT 'string',\n  description TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  INDEX idx_kp_endpoint (endpoint_id),\n  INDEX idx_kp_name (name)\n);\n\nCREATE TABLE kg_responses (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  endpoint_id INT NOT NULL,\n  http_status INT NOT NULL,\n  description TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  INDEX idx_kr_endpoint (endpoint_id)\n);\n\nCREATE TABLE kg_auth_methods (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  auth_id VARCHAR(64) NOT NULL UNIQUE,\n  auth_type VARCHAR(64) NOT NULL,\n  description TEXT,\n  ttl_seconds INT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE kg_resources (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  name VARCHAR(128) NOT NULL UNIQUE,\n  endpoint_count INT NOT NULL DEFAULT 0,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE kg_use_cases (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  intent VARCHAR(128) NOT NULL UNIQUE,\n  semantic_type ENUM('READ','CREATE','UPDATE','DELETE') NOT NULL DEFAULT 'READ',\n  domain VARCHAR(128) NOT NULL,\n  description TEXT,\n  endpoint_ids JSON,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  INDEX idx_kuc_domain (domain),\n  INDEX idx_kuc_type (semantic_type)\n);\n\nCREATE TABLE kg_indices (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  pattern VARCHAR(256) NOT NULL UNIQUE,\n  description TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE kg_fields (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  index_id INT NOT NULL,\n  field_name VARCHAR(256) NOT NULL,\n  field_type VARCHAR(64) NOT NULL,\n  description TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  INDEX idx_kf_index (index_id),\n  INDEX idx_kf_name (field_name)\n);\n\nCREATE TABLE kg_error_patterns (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  http_status INT NOT NULL UNIQUE,\n  description TEXT,\n  cause TEXT,\n  mitigation TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE kg_trust_history (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  endpoint_id INT NOT NULL,\n  old_score DECIMAL(4,3),\n  new_score DECIMAL(4,3) NOT NULL,\n  reason TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  INDEX idx_kth_endpoint (endpoint_id)\n);\n\nCREATE TABLE kg_answer_provenance (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  session_id VARCHAR(64),\n  question TEXT,\n  answer TEXT,\n  confidence DECIMAL(4,3) NOT NULL,\n  endpoint_ids JSON,\n  parameter_ids JSON,\n  doc_chunk_ids JSON,\n  warnings JSON,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  INDEX idx_kap_session (session_id),\n  INDEX idx_kap_confidence (confidence)\n);\n\nCREATE TABLE kg_sync_status (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  layer VARCHAR(64) NOT NULL UNIQUE,\n  entity_count INT NOT NULL DEFAULT 0,\n  last_sync_at TIMESTAMP NULL,\n  status ENUM('idle','syncing','completed','error') NOT NULL DEFAULT 'idle',\n  error_message TEXT,\n  duration_ms INT,\n  spec_version VARCHAR(32),\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 2608
}